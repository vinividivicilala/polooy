<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Changelog Gabungan</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
	   
    }

    .page {
      display: none;
    }
    .page.active {
      display: block;
    }

    /* === HALAMAN 1 (timeline vertikal, full hitam, garis di tengah) === */
    .timeline-page {
      background: #000;
      color: #fff;
      min-height: 100vh;
      padding: 40px;
    }

    .timeline-page h1 {
      text-align: center;
      font-size: 48px;
    }

    .timeline-page p {
      text-align: center;
      color: #aaa;
      margin-bottom: 50px;
    }

    .timeline {
      max-width: 800px;
      margin: 0 auto;
      position: relative;
    }
	
	



    /* Garis vertikal di tengah antara tanggal & teks */
    .timeline::before {
      content: "";
      position: absolute;
      left: 150px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #888;
    }

    .timeline-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 50px;
      cursor: pointer;
    }

    .timeline-date {
      flex: 0 0 130px;
      text-align: right;
      margin-right: 20px;
      font-size: 14px;
      color: #ccc;
    }

    .timeline-content {
      flex: 1;
      padding-left: 40px;
      font-size: 18px;
      font-weight: bold;
      color: #fff;
    }

    /* === HALAMAN 2 PERSIS ASLI === */
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      position: relative;
      color: #333;
      background: #fff;
    }

    .container::before {
      content: '';
      position: absolute;
      left: 120px;
      top: 80px;
      bottom: 0;
      width: 2px;
      background: #ccc;
      z-index: 0;
    }

    .entry {
      display: flex;
      align-items: flex-start;
      position: relative;
      margin-bottom: 60px;
    }

    .entry .judul {
      font-weight: bold;
      font-size: 18px;
      color: #333;
      margin-bottom: 10px;
    }

    .right-content {
      display: flex;
      flex-direction: column;
      gap: 12px; /* jarak antara judul dan konten */
      max-width: 500px;
    }

    .date {
      font-size: 14px;
      font-weight: normal;
      color: #666;              /* warna abu muda */
      text-align: left;         /* rata kiri */
      padding-right: 0;
      margin-left: 0;
      margin-top: 0px;
      white-space: nowrap;      /* tetap satu baris */
      display: flex;
      align-items: center;
      gap: 6px;                 /* jarak antara icon dan teks */
    }

    .date img {
      width: 50px;
      height: 50px;
      margin-right: 6px;
    }

    .line {
      height: 2px;
      background: #ccc;
      flex-grow: 1;
      margin-top: 14px;
      margin-left: 10px;
      margin-right: 10px;
    }

    .content {
      background: #f9f9f9;
      padding: 12px 16px;
      border-radius: 6px;
      max-width: 500px;
    }

    .content img {
      max-width: 100%;
      margin-top: 8px;
      border-radius: 6px;
    }

    ul {
      padding-left: 16px;
      margin: 10px 0 0 0;
    }

    li {
      margin: 10px 0;
      font-size: 28px;
    }

    h1 {
      margin-left: 160px;
      font-size: 40px;
    }
	
	

    .back-btn {
      display: inline-block;
      margin: 20px 0;
      padding: 8px 16px;
      background: #007BFF;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
    }
    
    .judul {
      font-weight: bold;
      font-size: 18px;
      margin: 8px 0;
      color: #333;
    }

    .label-new-inline {
      background-color: blue;
      color: white;
      font-size: 15px;
      font-weight: bold;
      padding: 2px 6px;
      border-radius: 4px;
      margin-left: 10px;
      display: inline-block;
    }

    .image-row {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }

    .image-row img {
      width: 100%;
      max-width: 250px;
      cursor: pointer;
      border-radius: 12px;
      transition: transform 0.2s;
    }

    .image-row img:hover {
      transform: scale(1.05);
    }

    /* Overlay fullscreen */
    .fullscreen-overlay {
      display: none;
      position: fixed;
      z-index: 9999;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }

    .fullscreen-overlay img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
      box-shadow: 0 0 20px #fff;
      cursor: pointer;
    }

    /* Gaya komentar yang diperbarui */
    .comment-section {
      margin-top: 15px;
      width: 100%;
    }

    .comment-section h4 {
      color: #333;
      margin-bottom: 10px;
    }

    .comment-form {
      margin-bottom: 15px;
    }

    .comment-form input,
    .comment-form textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    .comment-form button {
      background: #007BFF;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    .comment-form button:hover {
      background: #0056b3;
    }

    .comments-list {
      width: 100%;
    }

    .comment {
      position: relative;
      margin-bottom: 15px;
      padding-left: 20px;
      border-left: 2px solid #007BFF;
    }

    .comment::before {
      content: "";
      position: absolute;
      left: -2px;
      top: 20px;
      bottom: -15px;
      width: 2px;
      background: #007BFF;
      z-index: -1;
    }

    .comment-header {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }

    .comment-name {
      font-weight: bold;
      margin-right: 10px;
    }

    .comment-time {
      font-size: 12px;
      color: #666;
    }

    .comment-text {
      margin-bottom: 5px;
    }

    .comment-actions {
      margin-top: 5px;
    }

    .reply-btn {
      background: none;
      border: none;
      color: #007BFF;
      cursor: pointer;
      font-size: 12px;
      padding: 0;
    }

    .replies {
      margin-left: 20px;
      padding-left: 20px;
      position: relative;
    }

    .replies::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #ddd;
    }

    /* Gaya khusus untuk halaman 1 */
    .timeline-page .comment-section {
      background: #111;
      padding: 15px;
      border-radius: 6px;
      margin-top: 15px;
    }

    .timeline-page .comment-form input,
    .timeline-page .comment-form textarea {
      background: #222;
      color: #fff;
      border: 1px solid #444;
    }

    .timeline-page .comment {
      color: #fff;
      border-left-color: #4CAF50;
    }

    .timeline-page .comment::before {
      background: #4CAF50;
    }

    .timeline-page .comment-time {
      color: #aaa;
    }

    .timeline-page .reply-btn {
      color: #4CAF50;
    }

    .timeline-page .replies::before {
      background: #4CAF50;
    }
	
	 h4 {
      margin-right: 30px;
      font-size: 29px;
    }
	
	
	.comment-count {
    background-color: #007BFF;
    color: white;
    font-size: 25px;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 10px;
    margin-left: 8px;
    display: inline-block;
  }

  .timeline-page .comment-count {
    background-color: #4CAF50;
  }
	
	
	.support-section {
  margin-top: 10px;
  font-size: 16px;
}

.view-count {
  margin-bottom: 5px;
}

.like-btn {
  background-color: #ffcc00;
  border: none;
  border-radius: 5px;
  padding: 6px 12px;
  cursor: pointer;
  font-weight: bold;
}

.like-btn:hover {
  background-color: #e6b800;
}

	
	.contact-links {
  background: #fff;
  color: #000;
  padding: 60px 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.contact-links p {
  font-size: 16px;
  max-width: 700px;
  text-align: center;
  margin-bottom: 30px;
  color: #333;
}

.contact-item {
  display: flex;
  flex-direction: column;
  padding: 15px 20px;
  background: #f9f9f9;
  border: 1px solid #ccc;
  margin-bottom: 12px;
  border-radius: 8px;
  width: 100%;
  max-width: 600px;
}

.contact-item span {
  color: #666;
  font-size: 14px;
  margin-bottom: 5px;
}

.contact-item a {
  color: #000;
  font-size: 18px;
  text-decoration: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.contact-item a svg {
  width: 18px;
  height: 18px;
  margin-left: 10px;
  stroke: #000;
  flex-shrink: 0;
}

	
	
	
.contact-dark {
  background: #000;          
  color: #fff;               
  padding: 60px 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.contact-dark p {
  font-size: 16px;
  text-align: center;
  max-width: 700px;
  margin-bottom: 30px;
  color: #cfcfcf;
}

.contact-dark .contact-item {
  background: #111;          
  border: 1px solid #333;
  color: #fff;
}

.contact-dark .contact-item span { color: #999; }
.contact-dark .contact-item a  { color: #fff; }
.contact-dark .contact-item a svg { stroke: #fff; }
	
	
	
	
	
	#contact-hover-banner {
  transition: opacity 0.3s ease;
}




	#lokasi-info {
  text-align: right; /* Rata kanan di dalam bloknya */
  margin: 20px 40px 0 0; /* Jarak dari atas & kanan */
  font-size: 16px;
  color: black;
   background: red;
}

	
	.back-btn-custom {
  position: fixed;  /* tetap di sudut atas saat scroll */
  top: 20px;
  left: 20px;
  display: flex;
  align-items: center;
  color: #000;       /* warna hitam */
  text-decoration: none;
  font-weight: bold;
  font-size: 16px;
}

.back-btn-custom svg {
  width: 30px;
  height: 30px;
}

.fullscreen-content {
  display: flex;
  max-width: 90%;
  max-height: 90%;
  background: #fff;
  border-radius: 10px;
  overflow: hidden;
}

.fullscreen-content img {
  max-width: 60%;
  max-height: 90vh;
  object-fit: contain;
}

.image-comment-section {
  width: 40%;
  min-width: 300px;
  padding: 20px;
  background: #f5f5f5;
  overflow-y: auto;
  max-height: 90vh;
}

/* Untuk dark mode */
.timeline-page .fullscreen-content {
  background: #222;
}

.timeline-page .image-comment-section {
  background: #333;
  color: #fff;
}

.timeline-page .comment-form input,
.timeline-page .comment-form textarea {
  background: #444;
  color: #fff;
  border: 1px solid #666;
}




#fullscreen-comments .comment {
  margin-bottom: 16px;
  background: #fff;
  padding: 10px 14px;
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  color: #000;
}

.timeline-page #fullscreen-comments .comment {
  background: #222;
  color: #fff;
  box-shadow: none;
}




#progress-indicator {
  position: fixed;
  top: 20px;
  right: 30px;
  display: flex;
  align-items: center;
  background: #111;
  color: #fff;
  padding: 18px 24px;
  border-radius: 12px;
  font-weight: bold;
  font-size: 32px;
  z-index: 9999;
}

#progress-indicator svg {
  width: 28px;
  height: 28px;
  margin-left: 8px;
  stroke: #fff;
}


	#add-feature-btn {
  position: fixed;
  top: 70px;
  right: 30px;
  background: #4CAF50;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

#activity-log {
  position: fixed;
  top: 120px;
  right: 30px;
  background: #222;
  color: #fff;
  padding: 12px;
  border-radius: 8px;
  width: 200px;
  max-height: 300px;
  overflow-y: auto;
}

#activity-log h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
}

#activity-log ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#activity-log li {
  margin-bottom: 8px;
  font-size: 14px;
}


#progress-indicator {
  position: fixed;
  top: 20px;
  right: 30px;
  display: flex;
  align-items: center;
  background: #111;
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 16px;
  z-index: 9999;
  cursor: pointer; /* agar kelihatan bisa di-klik */
}

#progress-indicator svg {
  width: 20px;
  height: 20px;
  margin-left: 8px;
  stroke: #fff;
}

#activity-log {
  position: fixed;
  top: 60px; /* sedikit di bawah progress */
  right: 30px;
  background: #222;
  color: #fff;
  padding: 12px;
  border-radius: 8px;
  width: 220px;
  max-height: 300px;
  overflow-y: auto;
  opacity: 0;
  transform: scaleY(0);
  transform-origin: top;
  transition: all 0.3s ease;
  pointer-events: none; /* agar tidak bisa diklik saat hidden */
}

#activity-log.active {
  opacity: 1;
  transform: scaleY(1);
  pointer-events: auto;
}

#activity-log h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
}

#activity-log ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#activity-log li {
  margin-bottom: 8px;
  font-size: 14px;
}

#add-feature-btn {
  position: fixed;
  top: 100px;
  right: 30px;
  background: #4CAF50;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}


#progress-indicator {
  position: fixed;
  top: 20px;
  right: 30px;
  display: flex;
  align-items: center;
  background: #111;
  color: #fff;
  padding: 12px 20px;
  border-radius: 12px;
  font-weight: bold;
  font-size: 18px;
  z-index: 9999;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
}

#progress-indicator:hover {
  background: #222;
  transform: translateY(-2px);
}

#progress-percent {
  font-size: 24px;
  margin-right: 8px;
  color: #4CAF50;
}

#progress-arrow {
  width: 24px;
  height: 24px;
  transition: transform 0.3s ease;
}

#progress-indicator.active #progress-arrow {
  transform: rotate(90deg);
}


#activity-log {
  background: #222;
  color: #fff;
  padding: 15px;
  border-radius: 8px;
  max-height: 300px;
  overflow-y: auto;
}

#activity-log h3 {
  margin-top: 0;
  color: #4CAF50;
}

#activity-log ul {
  padding-left: 0;
  list-style-type: none;
}

#activity-log li {
  margin-bottom: 10px;
}



.vote-controls {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: 10px;
}

.vote-btn {
  background-color: transparent;
  border: none;
  cursor: pointer;
  padding: 4px;
  transition: transform 0.2s ease, color 0.2s ease;
}

.vote-btn svg {
  width: 29px;
  height: 29px;
  stroke: red;
  transition: stroke 0.2s ease, transform 0.2s ease;
}

.vote-btn:hover svg {
  stroke: green;
  transform: scale(1.3);
}

.vote-btn.down:hover svg {
  stroke: blue;
}

.vote-count {
  min-width: 24px;
  font-weight: bold;
  font-size: 16px;
  color: #555;
  transition: color 0.3s ease;
}

.vote-count.flash-up {
  color: #4CAF50 !important;
  animation: flash-up 0.6s ease;
}

.vote-count.flash-down {
  color: #f44336 !important;
  animation: flash-down 0.6s ease;
}

@keyframes flash-up {
  0% { transform: scale(1); }
  50% { transform: scale(1.4); }
  100% { transform: scale(1); }
}

@keyframes flash-down {
  0% { transform: scale(1); }
  50% { transform: scale(0.7); }
  100% { transform: scale(1); }
}


@keyframes slideInLeft {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

.timeline-page h1 {
  animation: slideInLeft 20s ease-out forwards;
  opacity: 0; /* awalnya transparan */
}




.slider-intro {
  background: #161618;
  color: #fff;
  padding: 60px 20px 40px;
  text-align: center;
  border-radius: 28px;
  margin: 30px auto;
  max-width: 900px;
}

.slider-title {
  font-size: 48px;
  font-weight: bold;
  margin-bottom: 10px;
  animation: slideIntroTitle 1.2s ease-out forwards;
  opacity: 0;
}

@keyframes slideIntroTitle {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0%);
    opacity: 1;
  }
}

.slider-sub {
  font-size: 26px;
  margin: 0;
}
.slider-sub .sub-small {
  font-size: 16px;
  color: #aaa;
}

.slider-desc {
  font-size: 16px;
  color: #ddd;
  margin-top: 10px;
}

.slider-btn {
  margin-top: 20px;
  background: #6366f1;
  color: #fff;
  font-weight: bold;
  padding: 12px 24px;
  border: none;
  border-radius: 24px;
  cursor: pointer;
  font-size: 16px;
}

.circle-bar-wrapper {
  margin-top: 30px;
}

#circle-progress-indicator {
  height: 10px;
  width: 120px;
  background-color: #ddd;
  border-radius: 20px;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
}

#circle-progress-indicator::before {
  content: '';
  position: absolute;
  height: 100%;
  width: 0%;
  background-color: #2196f3;
  border-radius: 20px;
  animation: fillBar 5s linear forwards;
}

@keyframes fillBar {
  0% { width: 0%; }
  100% { width: 100%; }
}

.dot-indicators {
  margin-top: 8px;
  display: flex;
  justify-content: center;
  gap: 10px;
}

.dot {
  height: 8px;
  width: 8px;
  background: #ccc;
  border-radius: 50%;
  display: inline-block;
}

.dot.active {
  background: #2196f3;
}

.intro-slider-container {
  background: #161618;
  color: #fff;
  padding: 60px 20px 40px;
  text-align: center;
  border-radius: 28px;
  margin: 40px auto 30px;
  max-width: 880px;
}

.intro-title {
  font-size: 48px;
  font-weight: bold;
  margin-bottom: 10px;
  animation: introSlideIn 1.5s ease-out forwards;
  opacity: 0;
}

@keyframes introSlideIn {
  from { transform: translateX(-100%); opacity: 0; }
  to   { transform: translateX(0); opacity: 1; }
}

.intro-subtitle {
  font-size: 24px;
  margin: 0;
}

.intro-subtitle .small-text {
  font-size: 15px;
  color: #aaa;
}

.intro-desc {
  font-size: 16px;
  color: #ddd;
  margin-top: 8px;
}

.intro-button {
  margin-top: 20px;
  background: #6366f1;
  color: #fff;
  font-weight: bold;
  padding: 12px 24px;
  border: none;
  border-radius: 24px;
  cursor: pointer;
  font-size: 16px;
}

.intro-progress-wrapper {
  margin-top: 30px;
  width: 60%;
  height: 10px;
  background: #ccc;
  border-radius: 10px;
  margin-inline: auto;
  overflow: hidden;
}

.intro-progress-bar {
  width: 0%;
  height: 100%;
  background: #2196f3;
  border-radius: 10px;
  transition: width 0.3s ease;
}

.intro-dots {
  margin-top: 12px;
  display: flex;
  justify-content: center;
  gap: 10px;
}

.intro-dot {
  width: 10px;
  height: 10px;
  background: #888;
  border-radius: 50%;
  transition: background 0.3s ease;
}

.intro-dot.active {
  background: #2196f3;
}



.slider-container {
  max-width: 900px;
  margin: 40px auto;
  padding: 40px 20px;
  background: #161618;
  color: #fff;
  border-radius: 28px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.slider-wrapper {
  position: relative;
  height: 300px;
}

.slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity 0.8s ease, transform 0.8s ease;
  transform: translateX(100%);
  padding: 20px;
  box-sizing: border-box;
}

.slide.active {
  opacity: 1;
  transform: translateX(0);
}

.slide h2 {
  font-size: 48px;
  margin-bottom: 10px;
  animation: slideInDown 0.8s ease-out;
}

.slide-subtitle {
  font-size: 26px;
  margin: 10px 0;
}

.slide-subtitle strong {
  font-size: 32px;
  color: #4CAF50;
}

.slide-subtitle span {
  font-size: 16px;
  color: #aaa;
}

.slide-description {
  font-size: 16px;
  color: #ddd;
  margin: 20px auto;
  max-width: 600px;
}

.slider-button {
  margin-top: 20px;
  background: #6366f1;
  color: #fff;
  border: none;
  padding: 12px 24px;
  border-radius: 24px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
}

.slider-button:hover {
  background: #4F46E5;
  transform: translateY(-2px);
}

.progress-container {
  width: 120px;
  height: 6px;
  background: #ddd; /* warna abu */
  border-radius: 5px;
  margin: 20px auto 0;
}

.progress-bar {
  height: 100%;
  width: 0;
  background: #2196f3; /* warna biru progress */
  border-radius: 5px;
  transition: width 5s linear; /* animasi isi progress */
}

.dot-indicators {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 10px;
}

.dot {
  width: 8px;
  height: 8px;
  background: #ccc;
  border-radius: 50%;
}

.dot.active {
  background: #2196f3;
}


@keyframes slideInDown {
  from {
    transform: translateY(-50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes fillProgress {
  from { width: 0; }
  to { width: 100%; }
}



/* Tambah ini di style */
.slider-wrapper {
  position: relative;
}

.progress-dots {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.progress-dots .dot {
  width: 12px;
  height: 12px;
  background: #888;
  border-radius: 50%;
  transition: background 0.3s ease;
}

.progress-dots .dot.active {
  background: #2196f3;
}

.progress-vertical {
  position: absolute;
  left: 6px; /* tengah dot */
  top: 0;
  width: 2px;
  height: 0%;
  background: #2196f3;
  transition: height 5s linear;
}


.ad-badge {
  position: absolute;
  bottom: 1px;
  right: 20px;
  background: red; /* ‚úÖ perbaikan */
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 24px;
  font-weight: bold;
  z-index: 10;
  
}


.dot {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ddd;
  position: relative;
  overflow: hidden;
}

.dot.active::before {
  content: "";
  position: absolute;
  top: 0; left: 0;
  height: 100%;
  width: 50%;
  background-color: #2196f3;
  animation: fillDot 5s linear forwards;
  border-radius: 50%;
}

@keyframes fillDot {
  from { width: 0%; }
  to   { width: 100%; }
}




 .popup-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    font-family: 'Roboto', sans-serif;
  }

  .popup-box {
    background: #000;
    color: #fff;
    width: 90%;
    max-width: 900px;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    position: relative;
    max-height: 90vh;
    overflow-y: auto;
  }

  .popup-box h2 {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    flex-wrap: wrap;
  }

  .popup-meta {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 14px;
    color: #aaa;
  }

  .popup-view-count {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .popup-separator {
    height: 1px;
    background: rgba(255,255,255,0.2);
    margin: 15px 0;
  }

  .popup-content {
    font-size: 18px;
    line-height: 1.6;
  }

  .popup-content p {
    margin-bottom: 15px;
  }

  .popup-content a {
    color: #4fc3f7;
    font-weight: bold;
    text-decoration: underline;
  }

  .popup-content ol {
    padding-left: 25px;
    margin: 15px 0;
  }

  .popup-content li {
    margin-bottom: 10px;
    font-size: 16px;
  }

  .popup-close {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
    transition: all 0.3s ease;
  }

  .popup-close:hover {
    background: #3e8e41;
  }

  .popup-img-container {
    margin: 20px 0;
    text-align: left;
  }

  .popup-img {
    max-width: 100%;
    max-height: 400px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  }

  .popup-subtitle {
    font-size: 20px;
    color: #ccc;
    margin-bottom: 15px;
    font-weight: bold;
  }

  .popup-subtitle-number {
    background: #4CAF50;
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 8px;
    font-size: 16px;
  }













  </style>
</head>
<body>

 <div class="fullscreen-overlay" id="fullscreenOverlay" onclick="closeFullscreen(event)">
  <div class="fullscreen-content" onclick="event.stopPropagation()">
    <img id="fullscreenImage" src="" alt="Fullscreen">
   <div class="image-comment-section">
  <h4 style="margin-bottom: 10px;">Komentar 
    <span id="fullscreen-comment-count" class="comment-count"></span>
  </h4>
  <div class="comments-list" id="fullscreen-comments"></div>
  <p id="no-comments-msg" style="color: gray; text-align: center;">Belum ada komentar</p>
  <form class="comment-form" onsubmit="submitFullscreenComment(event)">
        <input type="text" name="name" placeholder="Nama" required>
        <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
        <input type="hidden" name="parentId" value="">
        <button type="submit">Kirim</button>
      </form>
    </div>
  </div>
</div>


  <div id="contact-hover-banner" style="
 transition: opacity 0.3s ease;
  position: fixed;
  top: 0;
  left: 0;
  transform: translate(-50%, -150%);
  background-color: #333;
  color: #000; /* ‚úÖ warna teks jadi hitam */
  padding: 8px 14px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: bold;
  z-index: 9999;
  pointer-events: none;
  display: none;
  white-space: nowrap;
  transition: opacity 0.2s ease;">
</div>

<div id="progress-status" style="
  position: fixed;
  top: 80px;
  right: 30px;
  color: #4CAF50;
  font-weight: bold;
  font-size: 18px;"></div>















  
<p id="lokasi-info" style="text-align:center; color: black; font-size:29px; margin-bottom:20px;">
    Mendeteksi lokasi...
  </p>

  <!-- === HALAMAN 1 === -->
  <div class="page timeline-page active" id="page1">
    <h1>Website Changelog Note Farid 2025</h1>
    <p>Kami akan membagikan daftar pembaruan, peningkatan, dan perbaikan yang dilakukan pada situs web note farid. Pantau terus.</p>
    <div class="timeline" id="timeline"></div>
	
	
	
	
	
	<div class="contact-dark">
  <p>Kamu bisa melihat aktivitas saya, sesuai dengan apa yang kamu inginkan.</p>

  <div class="contact-item">
    <span>@fardardinsyh</span>
    <a href="https://instagram.com/fardardinsyh" target="_blank">
      Instagram
      <svg viewBox="0 0 34 34"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span>@github_user</span>
    <a href="https://github.com/" target="_blank">
      Github
      <svg viewBox="0 0 34 34"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span>LinkedIn Farid</span>
    <a href="https://linkedin.com/in/your-profile" target="_blank">
      Linkedin
      <svg viewBox="0 0 34 34"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span>Behance Farid</span>
    <a href="https://behance.net/your-profile" target="_blank">
      Behance
      <svg viewBox="0 0 34 34"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span>faridardiansyah061@gmail.com</span>
    <a href="mailto:faridardiansyah061@gmail.com">
      Email
      <svg viewBox="0 0 34 34"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>
</div>

<div id="contact-response" style="display:none; margin-top: 30px; padding: 20px; border-radius: 10px; text-align:center; font-size: 18px; font-weight: bold;"></div>
  </div>
  
  
  
  
  
  
  <div id="progress-indicator">
  <span id="progress-percent">0%</span>
  <svg id="progress-arrow" viewBox="0 0 24 24">
    <path d="M5 12h14M13 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</div>

<div id="activity-log">
  <h3>Riwayat Kegiatan</h3>
  <ul id="log-list"></ul>
</div>

<div class="slider-container">
  <div class="slider-wrapper">
    <!-- Slide 1 -->
    <div class="slide active">
	<div class="ad-badge">Ads</div>
       <h2>
    <a href="https://www.instagram.com/krea.loka/" target="_blank" style="color: #fff; background: blue; padding: 4px 10px; border-radius: 8px; text-decoration: none;">
      Jasa Illustration Character
    </a>
  </h2>
	  <p class="slide-subtitle">
  <strong style="background: red; padding: 4px 8px; border-radius: 8px;">0%</strong>
  <span style="background: #333; padding: 2px 6px; border-radius: 6px;">per setiap konsultasi</span>
</p>

      <p class="slide-description">jasa illustration character <strong style="background: red; padding: 4px 8px; border-radius: 8px;">krealoka</strong>secara profesional.</p>
<button class="slider-button" id="open-ad-btn" onclick="openPopupAd()">Daftar Sekarang</button>
</div>

    
    <!-- Slide 2 -->
    <div class="slide">
		  	<div class="ad-badge">Coming Soon</div>
      <h2>Coming Soon</h2>
      <p class="slide-subtitle"><strong>Coming Soon</strong> <span>Coming Soon</span></p>
      <p class="slide-description">Coming Soon.</p>
      <button class="slider-button">Coming Soon</button>
    </div>
    
    <!-- Slide 3 -->
    <div class="slide">
		  	<div class="ad-badge">Coming Soon</div>
      <h2>Coming Soon</h2>
      <p class="slide-subtitle"><strong>Coming Soon</strong> <span>Coming Soon</span></p>
      <p class="slide-description">Coming Soon.</p>
      <button class="slider-button">Coming Soon</button>
    </div>
  </div>
  
 <div class="progress-dots">
  <span class="dot active"></span>
  <span class="dot"></span>
  <span class="dot"></span>
  <div class="progress-vertical"></div>
</div>
</div>







<div id="popupAd" class="popup-overlay" style="display:none;">
  <div class="popup-box">
    <div class="popup-header">
      <h2 id="popup-title"></h2>
      <div class="popup-meta">
        <div id="popup-date" class="popup-date"></div>
        <div class="popup-view-count">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
          <span id="popup-views">0</span> views
        </div>
      </div>
    </div>
    
    <div class="popup-separator"></div>
    
    <div class="popup-subtitle">
      <span class="popup-subtitle-number" id="popup-subtitle-number"></span>
      <span id="popup-subtitle-text"></span>
    </div>
    
    <div class="popup-img-container">
      <img id="popup-img" src="" alt="Promo Image" class="popup-img">
    </div>
    
    <div class="popup-content" id="popup-desc"></div>
	<button onclick="closePopup()" class="popup-close">Tutup</button>

    
  </div>
</div>


  
 
 
 <!-- === HALAMAN 2 === -->
<div class="page" id="page2">
  <div class="container">
    <h1>Changelog</h1>

<a href="#" class="back-btn-custom" onclick="showPage('page1')">
  <svg viewBox="0 0 24 24" width="24" height="24">
    <path d="M19 12H5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12 5l-7 7 7 7" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  Back
</a>

 

    <!-- Entry 0 -->
    <div class="entry" id="entry-0">
      <div class="date"><img src="images/5.jpg" alt="icon"> 29 Jun, 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Website Changelog page selesai dibikin 2025 <span class="label-new-inline">NEW</span></div>
        <div class="content">
          <ul>
            <li>Halaman changelog sudah selesai dibikin, Kami akan membagikan daftar pembaruan, peningkatan, dan perbaikan yang dilakukan pada situs web note farid. Pantau terus!</li>
          </ul>
        </div>
		<div class="support-section" data-id="page2-entry-0">
  <div class="view-count">üëÅÔ∏è <span class="view-num">0</span> tayangan</div>
  <button class="like-btn">üëç Dukung Naik (<span class="like-num">0</span>)</button>
</div>

		<div class="comment-section" data-entry="page2-entry-0">
          <h4>Komentar</h4>
		  <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-0', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-page2-entry-0"></div>
        </div>
        <div class="image-row">
		<img src="images/5.jpg" data-id="image-5-1" onclick="openFullscreen(this)">
<img src="images/5.jpg" data-id="image-5-2" onclick="openFullscreen(this)">
<img src="images/5.jpg" data-id="image-5-3" onclick="openFullscreen(this)">

        </div>
      </div>
    </div>

    <!-- Entry 1 -->
    <div class="entry" id="entry-1">
      <div class="date"><img src="images/5.jpg" alt="icon"> 2 Jul, 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Website Changelog Note Farid aktif secara online </div>
        <div class="content">
          <ul>
            <li>Website Changelog Note Farid sudah didomain secara online, kamu bisa pantau terus secara update disini!</li>
          </ul>
        </div>
		<div class="support-section" data-id="page2-entry-1">
  <div class="view-count">üëÅÔ∏è <span class="view-num">0</span> tayangan</div>
  <button class="like-btn">üëç Dukung Naik (<span class="like-num">0</span>)</button>
</div>
		
		<div class="comment-section" data-entry="page2-entry-1">
          <h4>Komentar</h4>
		  <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-1', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
		  <div class="comments-list" id="comments-page2-entry-1"></div>
        </div>
        <div class="image-row">
         <img src="images/5.jpg" alt="Preview 1" data-id="image-5" onclick="openFullscreen(this)">
<img src="images/5.jpg" alt="Preview 1" data-id="image-5" onclick="openFullscreen(this)">
<img src="images/5.jpg" alt="Preview 1" data-id="image-5" onclick="openFullscreen(this)">

        </div>
      </div>
    </div>

    <!-- Entry 2 -->
    <div class="entry" id="entry-2">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
		<div class="comment-section" data-entry="page2-entry-2">
          <h4>Komentar</h4>
		  <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-2', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
		  <div class="comments-list" id="comments-page2-entry-2"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 3 -->
    <div class="entry" id="entry-3">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
		<div class="comment-section" data-entry="page2-entry-3">
          <h4>Komentar</h4>
		  <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-3', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-page2-entry-3"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 4 -->
    <div class="entry" id="entry-4">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
        <div class="comment-section" data-entry="page2-entry-4">
          <h4>Komentar</h4>
 <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-4', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-page2-entry-4"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 5 -->
    <div class="entry" id="entry-5">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
        <div class="comment-section" data-entry="page2-entry-5">
          <h4>Komentar</h4>
           <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-5', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-page2-entry-5"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 6 -->
    <div class="entry" id="entry-6">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
         <div class="comment-section" data-entry="page2-entry-6">
          <h4>Komentar</h4>
           <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-6', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-page2-entry-6"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 7 -->
    <div class="entry" id="entry-7">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
        <div class="comment-section" data-entry="page2-entry-7">
          <h4>Komentar</h4>
            <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-7', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-page2-entry-7"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 8 -->
    <div class="entry" id="entry-8">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
        <div class="comment-section" data-entry="page2-entry-8">
          <h4>Komentar</h4>
          <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-8', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
            <div class="comments-list" id="comments-page2-entry-8"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>

    <!-- Entry 9 -->
    <div class="entry" id="entry-9">
      <div class="date"><img src="images/5.jpg" alt="icon"> , 2025</div>
      <div class="line"></div>
      <div class="right-content">
        <div class="judul">Tidak Tersedia</div>
        <div class="content">
          <ul>
            <li>Tidak Tersedia.</li>
          </ul>
        </div>
         <div class="comment-section" data-entry="page2-entry-9">
          <h4>Komentar</h4>
           <form class="comment-form" onsubmit="submitComment(event, 'page2-entry-9', 'page2')">
            <input type="text" placeholder="Nama" name="name" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
             <div class="comments-list" id="comments-page2-entry-9"></div>
        </div>
        <div class="image-row">
          <img src="images/5.jpg" alt="Preview 1" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 2" onclick="openFullscreen(this)">
          <img src="images/5.jpg" alt="Preview 3" onclick="openFullscreen(this)">
        </div>
      </div>
    </div>
  </div>
  
  <div class="contact-links">
  <p>Kamu bisa melihat aktivitas saya, sesuai dengan apa yang kamu inginkan.</p>

  <div class="contact-item">
    <span>@fardardinsyh</span>
    <a href="https://instagram.com/fardardinsyh" target="_blank">
       Instagram
      <svg viewBox="0 0 24 24"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span></span>
    <a href="https://github.com/" target="_blank">
      Github
      <svg viewBox="0 0 24 24"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

   <div class="contact-item">
    <span>LinkedIn Farid</span>
    <a href="https://linkedin.com/in/your-profile" target="_blank">
      Linkedin
      <svg viewBox="0 0 24 24"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span>Behance Farid</span>
    <a href="https://behance.net/your-profile" target="_blank">
      Behance
      <svg viewBox="0 0 24 24"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>

  <div class="contact-item">
    <span>faridardiansyah061@gmail.com</span>
    <a href="mailto:faridardiansyah061@gmail.com">
      Email
      <svg viewBox="0 0 24 24"><path d="M5 19L19 5M19 5H8M19 5V16" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    </a>
  </div>
</div>
 
 

 
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getFirestore, collection, addDoc, query, where, onSnapshot, serverTimestamp, orderBy, doc, getDoc, updateDoc, increment, setDoc, getDocs,   } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCZnFwlT36_JlJ7SOS9p88n3A9BH9FmbNo",
    authDomain: "changelog-89294.firebaseapp.com",
    projectId: "changelog-89294",
    storageBucket: "changelog-89294.firebasestorage.app",
    messagingSenderId: "638362451511",
    appId: "1:638362451511:web:3b9a6051065940f82709b2"
  };

  // Inisialisasi Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
   const progressRef = collection(db, "progressLogs");
  const progressPercent = document.getElementById("progress-percent");
  const logList = document.getElementById("log-list");
  const now = new Date();
const timestamp = serverTimestamp();


  
  let currentImageId = null;

  const changelog = [
    { date: '29 Jun, 2025', content: 'Website Changelog page selesai dibikin 2025' },
    { date: '2 Jul, 2025', content: 'Website Changelog Note Farid aktif secara online' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
    { date: ', 2025', content: 'Tidak Tersedia' },
  ];

  const timelineContainer = document.getElementById('timeline');

  function formatTime(timestamp) {
  if (!timestamp || typeof timestamp.toDate !== 'function') return 'Belum tersedia';
  const date = timestamp.toDate();
  return date.toLocaleString('id-ID', {
    day: 'numeric',
    month: 'short',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
}

  
  
  
  
  
  // Fungsi untuk memuat komentar - sudah dimodifikasi untuk hitung total komentar
function loadComments(entryId) {
  const q = query(
    collection(db, "comments"),
    where("entryId", "==", entryId),
    orderBy("timestamp", "asc")
  );

  onSnapshot(q, (snapshot) => {
    const comments = {};
    let totalComments = 0; // Hitung semua komentar termasuk balasan
    
    snapshot.forEach(doc => {
      const c = { id: doc.id, ...doc.data() };
      comments[c.id] = c;
      c.replies = [];
      totalComments++; // Tambah ke total komentar
    });

    // Kelompokkan balasan
    Object.values(comments).forEach(c => {
      if (c.parentId && comments[c.parentId]) {
        comments[c.parentId].replies.push(c);
      }
    });

    // Update comment count in all matching sections
    const commentSections = document.querySelectorAll(`.comment-section[data-entry="${entryId}"], .comment-section[data-entry="entry-${entryId.split('-')[2]}"]`);
    
    commentSections.forEach(section => {
      // Cari atau buat elemen count
      let countElement = section.querySelector('.comment-count');
      if (!countElement) {
        const h4 = section.querySelector('h4');
        if (h4) {
          countElement = document.createElement('span');
          countElement.className = 'comment-count';
          h4.appendChild(countElement);
        }
      }
      
      if (countElement) {
        countElement.textContent = totalComments;
      }
    });

    // Render komentar ke container yang sesuai
    const containers = document.querySelectorAll(`.comments-list[id="comments-${entryId}"], .comments-list[id="comments-entry-${entryId.split('-')[2]}"]`);
    containers.forEach(container => renderComments(container, comments));
  });
}
  
  
  
  
  
  
  
  
  
  
  
  
  

// Hitung dan tampilkan tayangan & like
function setupEntryStats(entryId) {
  const viewEl = document.querySelector(`.support-section[data-id="${entryId}"] .view-num`);
  const likeEl = document.querySelector(`.support-section[data-id="${entryId}"] .like-num`);
  const likeBtn = document.querySelector(`.support-section[data-id="${entryId}"] .like-btn`);

  const statRef = doc(db, "entryStats", entryId);

  // Tambah 1 tayangan (sekali load)
  updateDoc(statRef, {
    views: increment(1)
  }).catch(async () => {
    await setDoc(statRef, { views: 1, likes: 0 }, { merge: true });
  });

  // Pantau real-time
  onSnapshot(statRef, (docSnap) => {
    const data = docSnap.data();
    if (data) {
      if (viewEl) viewEl.textContent = data.views || 0;
      if (likeEl) likeEl.textContent = data.likes || 0;
    }
  });

  // Tangani klik dukungan
  if (likeBtn) {
    likeBtn.addEventListener("click", async () => {
      await updateDoc(statRef, {
        likes: increment(1)
      }).catch(() => {
        setDoc(statRef, { views: 1, likes: 1 }, { merge: true });
      });
    });
  }
}
  
  
 
  
  // Fungsi untuk submit komentar - PERBAIKAN
  window.submitComment = async function(e, entryId, pageId) {
    e.preventDefault();
    e.stopPropagation();
    
    const form = e.target;
    const name = form.name.value.trim();
    const text = form.text.value.trim();
    const parentId = form.parentId.value || null;

    if (name && text) {
      try {
        await addDoc(collection(db, "comments"), {
          entryId,
          name,
          text,
          parentId,
          timestamp: serverTimestamp()
        });
        
        form.reset();
        form.parentId.value = "";
        form.text.placeholder = "Tulis komentar...";
        
        // Tidak perlu mengubah halaman setelah submit
      } catch (error) {
        console.error("Error adding comment: ", error);
        alert("Gagal mengirim komentar. Silakan coba lagi.");
      }
    }
  };

  // Render komentar ke container
  function renderComments(container, comments) {
    container.innerHTML = "";
    
    // Render komentar utama (yang bukan balasan)
    Object.values(comments).forEach(c => {
      if (!c.parentId) {
        container.appendChild(renderComment(c, comments));
      }
    });
  }

  
  
  
  // Fungsi untuk render komentar individual di halaman 1 dan 2
function renderComment(comment, allComments) {
  const div = document.createElement("div");
  div.className = "comment";
  
  // Hitung jumlah balasan
  const replyCount = comment.replies ? comment.replies.length : 0;
  
  div.innerHTML = `
    <div class="comment-header">
      <span class="comment-name">${comment.name}</span>
      <span class="comment-time">${formatTime(comment.timestamp)}</span>
    </div>
    <div class="comment-text">${comment.text}</div>
  <div class="comment-actions">
  <button class="reply-btn" data-comment-id="${comment.id}" data-entry-id="${comment.entryId}">Balas ${replyCount > 0 ? `(${replyCount})` : ''}</button>
  
  <div class="vote-controls">
    <button class="vote-btn up" data-id="${comment.id}" data-type="up" title="Vote Naik">
      <svg width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="19" x2="12" y2="5"/>
        <polyline points="5 12 12 5 19 12"/>
      </svg>
    </button>

    <span class="vote-count" id="vote-count-${comment.id}">${comment.votes || 0}</span>

    <button class="vote-btn down" data-id="${comment.id}" data-type="down" title="Vote Turun">
      <svg width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <polyline points="19 12 12 19 5 12"/>
      </svg>
    </button>
  </div>
</div>



  `;

  // Tambahkan container untuk balasan
  const repliesContainer = document.createElement("div");
  repliesContainer.className = "replies";
  div.appendChild(repliesContainer);

  // Render balasan jika ada
  if (comment.replies && comment.replies.length > 0) {
    comment.replies.forEach(reply => {
      repliesContainer.appendChild(renderComment(reply, allComments));
    });
  }

  return div;
}
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  // Fungsi untuk menangani klik tombol balas
  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('reply-btn')) {
      e.stopPropagation();
      const commentId = e.target.getAttribute('data-comment-id');
      const entryId = e.target.getAttribute('data-entry-id');
      
      // Temukan semua form komentar untuk entry ini
      const forms = document.querySelectorAll(`.comment-section[data-entry*="${entryId.split('-')[1]}"] .comment-form`);
      
      forms.forEach(form => {
        const textArea = form.querySelector('textarea[name="text"]');
        const parentInput = form.querySelector('input[name="parentId"]');
        
        if (parentInput && textArea) {
          parentInput.value = commentId;
          textArea.placeholder = "Tulis balasan...";
          textArea.focus();
          
          // Scroll ke form
          form.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
      });
    }
  });

  // Buat timeline items
  changelog.forEach((item, index) => {
    const div = document.createElement('div');
    div.className = 'timeline-item';
	const entryId = `page1-entry-${index}`; // ‚úÖ Benar

    div.innerHTML = `
      <div class="timeline-date">${item.date}</div>
      <div class="timeline-content">
        ${item.content}
        <div class="comment-section" data-entry="${entryId}">
          <h4 style="margin-top:15px;">Komentar</h4>
          <form class="comment-form" onsubmit="submitComment(event, '${entryId}', 'page1')">
            <input type="text" name="name" placeholder="Nama" required>
            <textarea name="text" placeholder="Tulis komentar..." required rows="3"></textarea>
            <input type="hidden" name="parentId" value="">
            <button type="submit">Kirim</button>
          </form>
          <div class="comments-list" id="comments-${entryId}"></div>
        </div>
      </div>
    `;

   // Event handler untuk navigasi
div.addEventListener('click', (event) => {
  if (!event.target.closest('form') && 
      !event.target.closest('.comments-list') && 
      !event.target.classList.contains('reply-btn')) {
    showPage('page2');
    setTimeout(() => {
      const target = document.getElementById(`entry-${index}`);
      if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 100);
  }
});

    timelineContainer.appendChild(div);
    loadComments(entryId);
  });

  // Fungsi untuk menampilkan halaman
  window.showPage = function(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
  };

  // Fungsi untuk gambar fullscreen
  window.openFullscreen = function(img) {
    const overlay = document.getElementById('fullscreenOverlay');
    const fullscreenImage = document.getElementById('fullscreenImage');
    fullscreenImage.src = img.src;
    overlay.style.display = 'flex';
  };

  window.closeFullscreen = function() {
    document.getElementById('fullscreenOverlay').style.display = 'none';
  };
  
  // Muat komentar untuk semua entri di halaman 2
  for (let i = 0; i < changelog.length; i++) {
  loadComments(`page2-entry-${i}`);
    setupEntryStats(`page2-entry-${i}`); // Tambahkan ini
  }
  
  
  const contactHoverData = {
  instagram: { color: "#7FFF00", text: "Instagram saya ‚Äî Update terbaru!" },
  github:  { color: "#ADFF2F", text: "GitHub saya ‚Äî Lihat kode saya!" },
  linkedin:{ color: "#7CFC00", text: "LinkedIn saya ‚Äî Hubungkan secara profesional." },
  behance: { color: "#00FF00", text: "Behance saya ‚Äî Hasil belajar illustration character." },
  email:   { color: "#FFFF00", text: "Email saya ‚Äî Kirim pesan langsung!" }
};

const hoverBanner = document.getElementById("contact-hover-banner");

document.querySelectorAll(".contact-item a").forEach(link => {
  const href = link.getAttribute("href") || "";
  let platform = "";

  if (href.includes("instagram")) platform = "instagram";
  else if (href.includes("github")) platform = "github";
  else if (href.includes("linkedin")) platform = "linkedin";
  else if (href.includes("behance")) platform = "behance";
  else if (href.includes("mailto")) platform = "email";

  if (platform && contactHoverData[platform]) {
    const { color, text } = contactHoverData[platform];

    link.addEventListener("mouseenter", () => {
      hoverBanner.textContent = text;
      hoverBanner.style.backgroundColor = color;
      hoverBanner.style.display = "block";
      hoverBanner.style.opacity = "1";
    });

    link.addEventListener("mousemove", (e) => {
      hoverBanner.style.left = `${e.clientX}px`;
      hoverBanner.style.top = `${e.clientY}px`;
    });

    link.addEventListener("mouseleave", () => {
      hoverBanner.style.opacity = "0";
      setTimeout(() => {
        hoverBanner.style.display = "none";
      }, 200);
    });
  }
});

  
  
function detectLocation() {
  const lokasiEl = document.getElementById("lokasi-info");
  if (!lokasiEl) return; // stop kalau elemen tidak ada

  if (navigator.geolocation) {
    lokasiEl.textContent = "Mencoba mendeteksi lokasi...";
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else {
    lokasiEl.textContent = "Browser tidak mendukung Geolocation.";
  }
}

function showPosition(position) {
  const lat = position.coords.latitude.toFixed(4);
  const lon = position.coords.longitude.toFixed(4);
  document.getElementById("lokasi-info").textContent = `Lokasi perkiraan: Latitude ${lat}, Longitude ${lon}`;
}

function showError(error) {
  const lokasiEl = document.getElementById("lokasi-info");
  switch(error.code) {
    case error.PERMISSION_DENIED:
      lokasiEl.textContent = "Izin lokasi ditolak.";
      break;
    case error.POSITION_UNAVAILABLE:
      lokasiEl.textContent = "Informasi lokasi tidak tersedia.";
      break;
    case error.TIMEOUT:
      lokasiEl.textContent = "Permintaan lokasi melebihi waktu tunggu.";
      break;
    default:
      lokasiEl.textContent = "Terjadi kesalahan saat mendeteksi lokasi.";
  }
}

// Jalankan saat window selesai load
window.addEventListener("load", detectLocation);

 
 
 
 
 
 
 
 
 function loadImageComments(imageId) {
  const countEl = document.getElementById('fullscreen-comment-count');
  const container = document.getElementById('fullscreen-comments');
  const noCommentsMsg = document.getElementById('no-comments-msg');
  
  if (!countEl || !container) return;

  countEl.textContent = '0'; // Reset saat loading
  noCommentsMsg.style.display = 'block'; // Tampilkan pesan "Belum ada komentar"

  const q = query(
    collection(db, "imageComments"),
    where("imageId", "==", imageId),
    orderBy("timestamp", "asc")
  );

  onSnapshot(q, (snapshot) => {
    const comments = {};
    let totalComments = 0; // Hitung semua komentar termasuk balasan

    snapshot.forEach(doc => {
      const c = { id: doc.id, ...doc.data(), replies: [] };
      comments[c.id] = c;
      totalComments++; // Tambahkan ke total komentar
    });

    // Kelompokkan balasan
    Object.values(comments).forEach(c => {
      if (c.parentId && comments[c.parentId]) {
        comments[c.parentId].replies.push(c);
      }
    });

    // Update jumlah komentar
    countEl.textContent = totalComments;
    
    // Sembunyikan pesan jika ada komentar
    if (totalComments > 0) {
      noCommentsMsg.style.display = 'none';
    } else {
      noCommentsMsg.style.display = 'block';
    }

    // Render komentar
    container.innerHTML = "";
    Object.values(comments).forEach(c => {
      if (!c.parentId) {
        container.appendChild(renderImageComment(c, comments));
      }
    });

    // Scroll otomatis ke bawah
    setTimeout(() => {
      container.scrollTop = container.scrollHeight;
    }, 100);
  });
}

 
 
 

// Fungsi format waktu "x menit/jam/hari yang lalu"
function formatTimeAgo(timestamp) {
  if (!timestamp) return '';
  const now = new Date();
  const date = timestamp.toDate();
  const seconds = Math.floor((now - date) / 1000);
  
  let interval = Math.floor(seconds / 31536000);
  if (interval >= 1) return `${interval} tahun yang lalu`;
  
  interval = Math.floor(seconds / 2592000);
  if (interval >= 1) return `${interval} bulan yang lalu`;
  
  interval = Math.floor(seconds / 86400);
  if (interval >= 1) return `${interval} hari yang lalu`;
  
  interval = Math.floor(seconds / 3600);
  if (interval >= 1) return `${interval} jam yang lalu`;
  
  interval = Math.floor(seconds / 60);
  if (interval >= 1) return `${interval} menit yang lalu`;
  
  return 'Baru saja';
}



window.submitFullscreenComment = async function(e) {
  e.preventDefault();
  e.stopPropagation();
  
  const form = e.target;
  const name = form.name.value.trim();
  const text = form.text.value.trim();
  const parentId = form.parentId.value || null;

  if (name && text && currentImageId) {
    try {
      await addDoc(collection(db, "imageComments"), {
        imageId: currentImageId,
        name,
        text,
        parentId,
        timestamp: serverTimestamp()
      });
      
      // Reset form after submission
      form.reset();
      form.parentId.value = "";
      form.text.placeholder = "Tulis komentar...";
    } catch (error) {
      console.error("Error adding comment: ", error);
      alert("Gagal mengirim komentar. Silakan coba lagi.");
    }
  }
};







window.closeFullscreen = function(e) {
  if (e.target === document.getElementById('fullscreenOverlay')) {
    document.getElementById('fullscreenOverlay').style.display = 'none';
    currentImageId = null;
    localStorage.removeItem('lastImageId'); // ‚úÖ hapus imageId tersimpan
  }
};



window.openFullscreen = function(img) {
  const overlay = document.getElementById('fullscreenOverlay');
  const fullscreenImage = document.getElementById('fullscreenImage');
  fullscreenImage.src = img.src;
  overlay.style.display = 'flex';

  currentImageId = img.getAttribute('data-id');
  localStorage.setItem('lastImageId', currentImageId);

  // Reset form komentar
  const form = document.querySelector('#fullscreenOverlay .comment-form');
  if (form) {
    form.reset();
    form.parentId.value = "";
    form.text.placeholder = "Tulis komentar...";
  }

  // Tampilkan pesan "Belum ada komentar" sementara
  document.getElementById('no-comments-msg').style.display = 'block';
  
  // Muat komentar
  loadImageComments(currentImageId);
};







// Saat reload halaman, kalau sebelumnya user buka gambar, tampilkan kembali
window.addEventListener("load", () => {
  const savedImageId = localStorage.getItem('lastImageId');
  if (savedImageId) {
    // Trigger buka gambar secara otomatis
    const img = document.querySelector(`img[data-id="${savedImageId}"]`);
    if (img) {
      openFullscreen(img);
    }
  }
});




function renderImageComment(comment, allComments) {
  const div = document.createElement("div");
  div.className = "comment";
  
  // Hitung jumlah balasan
  const replyCount = comment.replies ? comment.replies.length : 0;
  
  div.innerHTML = `
    <div class="comment-header">
      <span class="comment-name">${comment.name}</span>
      <span class="comment-time">${formatTimeAgo(comment.timestamp)}</span>
    </div>
    <div class="comment-text">${comment.text}</div>
	 <div class="comment-actions">
  <button class="reply-btn" data-comment-id="${comment.id}" data-entry-id="${comment.entryId}">Balas ${replyCount > 0 ? `(${replyCount})` : ''}</button>
  
  <div class="vote-controls">
    <button class="vote-btn up" data-id="${comment.id}" data-type="up" title="Vote Naik">
      <svg width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="19" x2="12" y2="5"/>
        <polyline points="5 12 12 5 19 12"/>
      </svg>
    </button>

    <span class="vote-count" id="vote-count-${comment.id}">${comment.votes || 0}</span>

    <button class="vote-btn down" data-id="${comment.id}" data-type="down" title="Vote Turun">
      <svg width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <polyline points="19 12 12 19 5 12"/>
      </svg>
    </button>
  </div>
</div>

  `;

  // Tambahkan container untuk balasan
  const repliesContainer = document.createElement("div");
  repliesContainer.className = "replies";
  div.appendChild(repliesContainer);

  // Render balasan jika ada
  if (comment.replies && comment.replies.length > 0) {
    comment.replies.forEach(reply => {
      repliesContainer.appendChild(renderImageComment(reply, allComments));
    });
  }

  return div;
}




// ‚úÖ Event listener untuk voting komentar gambar (fullscreen)
document.getElementById('fullscreen-comments').addEventListener('click', function(e) {
  const btn = e.target.closest('.vote-btn');
  if (btn) {
    e.preventDefault();
    e.stopPropagation();
    const commentId = btn.getAttribute('data-id');
    const type = btn.getAttribute('data-type'); // "up" atau "down"
    if (commentId && type) {
      handleImageVote(commentId, type);
    }
  }
});




function handleImageVote(commentId, type) {
  const countEl = document.getElementById(`vote-count-${commentId}`);
  const commentRef = doc(db, "imageComments", commentId);

  getDoc(commentRef).then(docSnap => {
    if (docSnap.exists()) {
      const currentVotes = docSnap.data().votes || 0;
      const newVotes = type === "up" ? currentVotes + 1 : currentVotes - 1;

      updateDoc(commentRef, {
        votes: newVotes
      }).then(() => {
        if (countEl) {
          countEl.textContent = newVotes;
          countEl.classList.add(type === "up" ? 'flash-up' : 'flash-down');
          setTimeout(() => countEl.classList.remove('flash-up', 'flash-down'), 600);
        }
      });
    }
  }).catch(err => {
    console.error("Gagal melakukan vote:", err);
  });
}







// Handle reply button clicks in fullscreen overlay
document.getElementById('fullscreen-comments').addEventListener('click', function(e) {
  if (e.target.classList.contains('reply-btn')) {
    e.preventDefault();
    e.stopPropagation();
    
    const commentId = e.target.getAttribute('data-comment-id');
    const form = document.querySelector('#fullscreenOverlay .comment-form');
    
    if (form) {
      const textArea = form.querySelector('textarea[name="text"]');
      const parentInput = form.querySelector('input[name="parentId"]');
      
      parentInput.value = commentId;
      textArea.placeholder = "Tulis balasan...";
      textArea.focus();
      
      // Scroll to form
      form.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
  }
});




  // Fungsi menampilkan 1 riwayat kegiatan
  function addActivityToLog(message, timestamp) {
    const li = document.createElement("li");
    li.innerHTML = `
      <div style="margin-bottom: 20px; border-bottom: 1px solid #555; padding-bottom: 10px;">
        <img src="images/5.jpg" style="width: 100%; max-width: 200px; border-radius: 12px; margin-bottom: 10px;" alt="Foto Kegiatan">
        <div style="font-size: 18px; font-weight: bold; color: #fff;">${message}</div>
        <div style="font-size: 14px; color: #ccc;">${formatTime(timestamp)}</div>
      </div>
    `;
    logList.appendChild(li);
  }

  function updateProgress(target) {
  let start = parseInt(progressPercent.textContent.replace('%', '')) || 0;
  const duration = 1500;
  const startTime = performance.now();

  function animate(time) {
    const elapsed = time - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const eased = progress * progress * (3 - 2 * progress);
    const currentPercent = Math.floor(start + (target - start) * eased);
    progressPercent.textContent = currentPercent + '%';

    // ‚úÖ Tampilkan semua aktivitas sesuai progress
    progressActivities.forEach(activity => {
      if (
        activity.percent <= currentPercent &&
        !existingMessages.has(activity.message)
      ) {
        addActivityToLog(activity.message, new Date());
        addDoc(progressRef, {
          message: activity.message,
          timestamp: serverTimestamp()
        }).catch(error => {
          console.error("Error adding activity:", error);
        });
        existingMessages.add(activity.message);
      }
    });

    if (progress < 1) requestAnimationFrame(animate);
  }

  requestAnimationFrame(animate);
}


  
  
  let existingMessages = new Set(); // <- agar bisa diakses updateProgress()
async function simulateRealProgress() {
  const snapshot = await getDocs(progressRef);
  existingMessages.clear();

  snapshot.forEach(doc => {
    const data = doc.data();
    if (data.message) {
      existingMessages.add(data.message);
      addActivityToLog(data.message, data.timestamp);
    }
  });

  const totalActivities = progressActivities.length;
  const completedActivities = progressActivities.filter(a => 
    existingMessages.has(a.message)
  ).length;

  let percent = Math.floor((completedActivities / totalActivities) * 100);

  // ‚úÖ Jika kosong, langsung tambah aktivitas awal
  if (percent === 0) {
    const first = progressActivities[0];
    await addDoc(progressRef, {
      message: first.message,
      timestamp: serverTimestamp()
    });
    addActivityToLog(first.message, new Date());
    existingMessages.add(first.message);
    percent = 1;
  }

  updateProgress(percent);
}

  
  
   // Tambahkan variabel ini di bagian atas script
  let percentRotationInterval;
  let currentPercent = 0;
  const targetPercents = [10, 25, 50, 75, 90, 100]; // Daftar persentase yang akan dirotasi

  function startPercentRotation() {
  let index = 0;

  if (percentRotationInterval) clearInterval(percentRotationInterval);

  percentRotationInterval = setInterval(() => {
    const activity = progressActivities[index];
    if (!activity) return;

    // Tampilkan persen dulu
    progressPercent.innerHTML = `<span style="color:#4CAF50; font-weight:bold;">${activity.percent}%</span>`;
    
    setTimeout(() => {
      // Lalu ganti dengan teks aktivitas
      progressPercent.innerHTML = `<span style="color:#fff; font-size:16px;">${activity.message}</span>`;
    }, 1500); // setelah 1.5 detik ganti ke teks

    index = (index + 1) % progressActivities.length;
  }, 3000); // ganti setiap 3 detik
}

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  // Fungsi untuk animasi perubahan persentase
  function animatePercentChange(from, to) {
    const duration = 1000;
    const startTime = performance.now();
    
    function animate(time) {
      const elapsed = time - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const eased = progress * progress * (3 - 2 * progress);
      const currentValue = Math.floor(from + (to - from) * eased);
      
      progressPercent.textContent = currentValue + '%';
      
      if (progress < 1) {
        requestAnimationFrame(animate);
      }
    }
    
    requestAnimationFrame(animate);
  }

  // Jalankan saat halaman dimuat
  window.addEventListener("load", () => {
    simulateRealProgress();
    setTimeout(startPercentRotation, 2000); // Mulai rotasi setelah 2 detik
  });
  
  
  
  


const progressActivities = [
  { percent: 0, message: "Memulai Website changelog" },
];


  

window.addEventListener("load", () => {
  simulateRealProgress();
});

  


 // ‚úÖ Toggle log saat progress diklik
document.getElementById("progress-indicator").addEventListener("click", () => {
  const log = document.getElementById("activity-log");
  log.classList.toggle("active");
});

// Tangani klik vote (berlaku untuk semua komentar termasuk fullscreen)
document.addEventListener("click", async function(e) {
  const btn = e.target.closest(".vote-btn");
  if (!btn) return;

  e.preventDefault();
  e.stopPropagation();

  const commentId = btn.dataset.id;
  const type = btn.dataset.type;
  const voteDisplay = document.getElementById(`vote-count-${commentId}`);
  if (!commentId || !type || !voteDisplay) return;

  // Tentukan apakah berasal dari komentar gambar atau biasa
  const inFullscreen = btn.closest("#fullscreen-comments") !== null;
  const collectionName = inFullscreen ? "imageComments" : "comments";
  const commentRef = doc(db, collectionName, commentId);

  try {
    const snap = await getDoc(commentRef);
    if (!snap.exists()) return;

    const currentVotes = snap.data().votes || 0;
    const newVotes = type === "up" ? currentVotes + 1 : currentVotes - 1;
    await updateDoc(commentRef, { votes: newVotes });

    voteDisplay.textContent = newVotes;
    voteDisplay.classList.remove("flash-up", "flash-down");
    void voteDisplay.offsetWidth; // Trigger reflow
    voteDisplay.classList.add(type === "up" ? "flash-up" : "flash-down");
  } catch (err) {
    console.error("Gagal update vote:", err);
  }
});






 
let currentSlide = 0;
const slides = document.querySelectorAll('.slide');
const dots = document.querySelectorAll('.progress-dots .dot');
const progressVertical = document.querySelector('.progress-vertical');

function showSlide(idx) {
  slides.forEach((slide, i) => {
    slide.classList.toggle('active', i === idx);
  });

  dots.forEach((dot, i) => {
    dot.classList.remove('active');
    if (i === idx) dot.classList.add('active');
  });

  // Isi progress vertikal
  if (progressVertical) {
    progressVertical.style.height = ((idx + 1) / slides.length * 100) + '%';
  }

  currentSlide = idx;
}

function nextSlide() {
  const next = (currentSlide + 1) % slides.length;
  showSlide(next);
}

// Jalankan otomatis setiap 5 detik
setInterval(nextSlide, 5000);

// Inisialisasi awal
showSlide(0);







// Fungsi utama untuk membuka popup
window.openPopup = function({ title, desc, img, subtitle, subtitleNumber }) {
  const now = new Date();
  popupOpenedAt = now; // Simpan waktu pembukaan popup
  
  // Format tanggal dan waktu
  const options = { 
    day: 'numeric', 
    month: 'long', 
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  };
  const formattedDate = now.toLocaleDateString('id-ID', options);
  
  // Format deskripsi
  let formattedDesc = formatPopupDescription(desc);
  
  // Update elemen popup
  document.getElementById("popup-title").innerText = title;
  document.getElementById("popup-date").innerHTML = `${formattedDate} - <span id="popup-relative">Baru saja</span>`;
  document.getElementById("popup-desc").innerHTML = formattedDesc;
  document.getElementById("popup-subtitle-text").innerText = subtitle || "";
  document.getElementById("popup-subtitle-number").innerText = subtitleNumber || "";
  
  // Update gambar
  const imgElement = document.getElementById("popup-img");
  imgElement.src = img;
  adjustImageSize(imgElement);
  
  // Mulai tracking
  startPopupViewTracking();
  startRelativeTimeUpdater(now);
  
  // Tampilkan popup
  document.getElementById("popupAd").style.display = "flex";
};




// Fungsi untuk memulai tracking view
function startPopupViewTracking() {
  // Update view count segera
  incrementPopupView();
  
  // Update view count setiap 30 detik saat popup terbuka
  popupViewUpdateInterval = setInterval(incrementPopupView, 30000);
  
  // Update waktu setiap detik
  popupTimeUpdateInterval = setInterval(updatePopupTimeDisplay, 1000);
}

// Fungsi untuk menghentikan tracking
function stopPopupViewTracking() {
  clearInterval(popupViewUpdateInterval);
  clearInterval(popupTimeUpdateInterval);
}

// Fungsi untuk memperbarui tampilan waktu
function updatePopupTimeDisplay() {
  if (!popupOpenedAt) return;
  
  const relativeEl = document.getElementById('popup-relative');
  if (relativeEl) {
    relativeEl.textContent = getTimeAgoText(popupOpenedAt);
  }
}



// Fungsi untuk menambah view count
async function incrementPopupView() {
  const statRef = doc(db, "popupAdViews", "popupAd-main");

  try {
    // Coba update view count
    await updateDoc(statRef, {
      views: increment(1),
      lastViewed: serverTimestamp()
    });
    
    // Dapatkan data terbaru
    const snap = await getDoc(statRef);
    if (snap.exists()) {
      const data = snap.data();
      const viewsEl = document.getElementById("popup-views");
      if (viewsEl) {
        viewsEl.textContent = data.views || 0;
      }
    }
  } catch (err) {
    // Jika dokumen belum ada, buat baru
    await setDoc(statRef, { 
      views: 1,
      lastViewed: serverTimestamp()
    }, { merge: true });
    
    const viewsEl = document.getElementById("popup-views");
    if (viewsEl) viewsEl.textContent = "1";
  }
}












let popupOpenedAt = null;
  let popupViewUpdateInterval;
  let popupTimeUpdateInterval;




// Fungsi untuk mendapatkan teks waktu yang lalu
function getTimeAgoText(date) {
  const now = new Date();
  const diffMs = now - date;
  const diffSec = Math.floor(diffMs / 1000);
  const diffMin = Math.floor(diffSec / 60);
  const diffHour = Math.floor(diffMin / 60);
  const diffDay = Math.floor(diffHour / 24);

  if (diffSec < 10) return "Baru saja";
  if (diffSec < 60) return `${diffSec} detik yang lalu`;
  if (diffMin < 60) return `${diffMin} menit yang lalu`;
  if (diffHour < 24) return `${diffHour} jam yang lalu`;
  return `${diffDay} hari yang lalu`;
}
  
  
  
  
    async function updatePopupViewCount() {
    const statRef = doc(db, "entryStats", "popup-ad");
    const viewsEl = document.getElementById("popup-views");
    
    try {
      // First try to increment the count
      await updateDoc(statRef, {
        views: increment(1),
        lastViewed: serverTimestamp()
      });
      
      // Then get the updated count
      const snap = await getDoc(statRef);
      if (snap.exists()) {
        const data = snap.data();
        if (viewsEl) {
          viewsEl.textContent = data.views || 0;
        }
      }
    } catch (err) {
      // If document doesn't exist, create it
      await setDoc(statRef, { 
        views: 1, 
        likes: 0,
        lastViewed: serverTimestamp()
      }, { merge: true });
      if (viewsEl) viewsEl.textContent = "1";
    }
  }

  
  
  
  function startRelativeTimeUpdater(startTime) {
  function update() {
    const now = new Date();
    const diffMs = now - startTime;
    const diffSec = Math.floor(diffMs / 1000);
    const diffMin = Math.floor(diffSec / 60);
    const diffHour = Math.floor(diffMin / 60);

    let text = 'Baru saja';
    if (diffMin === 0) text = '0 menit yang lalu';
    else if (diffMin === 1) text = '1 menit yang lalu';
    else if (diffMin < 60) text = `${diffMin} menit yang lalu`;
    else if (diffHour === 1) text = '1 jam yang lalu';
    else text = `${diffHour} jam yang lalu`;

    const el = document.getElementById('popup-relative');
    if (el) el.textContent = text;
  }

  update();
  setInterval(update, 30000); // Update tiap 30 detik
}

  





function openPopupAd() {
  const popup = document.getElementById('popupAd');
  popup.style.display = 'flex';

  const title = 'Promo Ilustrasi Digital';
  const subtitleNumber = '1';
  const subtitleText = 'Special Offer for New Clients';
  const desc = '1. Konsultasi GRATIS\n2. Bayar setelah ACC\nInfo lengkap: https://wa.me/62812345678';
  const img = 'images/popo09.jpeg';

  document.getElementById('popup-title').textContent = title;
  document.getElementById('popup-subtitle-number').textContent = subtitleNumber;
  document.getElementById('popup-subtitle-text').textContent = subtitleText;
  document.getElementById('popup-desc').innerHTML = desc.replace(/\n/g, '<br>');
  document.getElementById('popup-img').src = img;

  const now = new Date();
  const formatted = now.toLocaleDateString('id-ID', {
    day: 'numeric',
    month: 'long',
    year: 'numeric'
  }) + ' pukul ' + now.toLocaleTimeString('id-ID', {
    hour: '2-digit',
    minute: '2-digit'
  });

  document.getElementById('popup-date').innerHTML = `${formatted} - <span id="popup-relative">Baru saja</span>`;
  startRelativeTimeUpdater(now);

  // ========== TAMBAH VIEW AKURAT ==========
  const adRef = doc(db, 'popupAdViews', 'popupAd-main');

  updateDoc(adRef, { views: increment(1) })
    .catch(async () => {
      await setDoc(adRef, { views: 1 }, { merge: true });
    });

  // Real-time update views
  onSnapshot(adRef, (snap) => {
    const data = snap.data();
    if (data && data.views !== undefined) {
      document.getElementById('popup-views').textContent = data.views;
    }
  });
}



// Fungsi untuk memformat deskripsi popup
function formatPopupDescription(desc) {
  let formattedDesc = desc;
  
  // Format list bernomor
  formattedDesc = formattedDesc.replace(/(\d+\.\s.+)/g, '<li>$1</li>');
  formattedDesc = formattedDesc.replace(/<li>/g, '<ol><li>').replace(/<\/li>/g, '</li></ol>');
  
  // Format paragraf dan line breaks
  formattedDesc = formattedDesc.split('\n').map(paragraph => {
    if (paragraph.startsWith('<ol>') || paragraph.startsWith('</ol>')) {
      return paragraph;
    }
    return `<p>${paragraph}</p>`;
  }).join('');
  
  // Format URL
  formattedDesc = formattedDesc.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank">$1</a>');
  
  return formattedDesc;
}



// Fungsi untuk menyesuaikan ukuran gambar
function adjustImageSize(imgElement) {
  imgElement.onload = function() {
    const aspectRatio = this.naturalWidth / this.naturalHeight;
    if (aspectRatio > 1) {
      this.style.maxWidth = "100%";
      this.style.height = "auto";
    } else {
      this.style.width = "auto";
      this.style.maxHeight = "400px";
    }
  };
}












  function closePopup() {
    document.getElementById('popupAd').style.display = 'none';
    stopPopupViewTracking();
    popupOpenedAt = null;
  }

  // Update the close button event listener
  document.querySelector('.popup-close').addEventListener('click', closePopup);




document.getElementById('open-ad-btn')?.addEventListener('click', () => {
  openPopup({
    title: 'Jasa Illustration Character',
    subtitle: 'Special Offer for New Clients',
    subtitleNumber: '1',
    desc: '1. Konsultasi GRATIS\n2. Bayar setelah ACC\nInfo lengkap: https://www.instagram.com/krea.loka/',
    img: 'images/popo09.jpeg'
  });
});








  </script>
</body>
</html>
